<!DOCTYPE html>
<html>
  {% include 'header.html' %}
  <body>
    {% include 'banner.html' %}
    {% include 'menu.html' %}
    {% include 'search.html' %}
    <p>The Virtuoso database contains <span id="CounterDB"></span> public sequences!</p>

    <section class="search-section">
      <div class="filter-options" action="#">
        <p>[Demo] Display content sequences by: </p>
        <div>
          <button class="button" onclick="fetchSEQCountBySpecimen()">Count by Specimen source</button>
          <button class="button" onclick="fetchSEQCountByLocation()">Count by Location</button>
          <button class="button" onclick="fetchSEQCountByTech()">Count by Sequencer</button>
          <!-- <button class="button" onclick="fetchAllaccessions()">Show All accessions</button> -->
          <button class="button" onclick="fetchSEQCountbyContinent()">Count by Continent</button>
          <button class="button" onclick="fetchMap()">Map</button>
        </div>

      </div>

    </section>
    <div id="loader" class="loader invisible">
    </div>

    <section id="map_view" class="invisible">
      <div id="map"></div>
    </section>

    <section>
      <div id="table"></div>
    </section>

    {% include 'footer.html' %}

    <script type="text/javascript">
      let scriptRoot = {{ request.script_root|tojson|safe }}; // examples

      document.addEventListener("DOMContentLoaded", function(){
          var count = fetch("/api/getCountDB")
              .then((resp) => resp.json())
              .then(function (data) {
                  count = data["sequences"];
                  console.log(count);
                  span = document.getElementById("CounterDB");
                  txt = document.createTextNode(count);
                  span.appendChild(txt);
              });
      });

    </script>
  </body>

</html>
